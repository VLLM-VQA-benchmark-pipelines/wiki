

[AI Studio](https://aistudio.google.com/app/prompts/new_chat), нужен VPN
## Question 1

```
Задача: на вход мультимодальной модели подается изображение паспорта владельца на русском языке, нужно извлечь все ключевые поля и выдать ответ.  
Сгенерируй лучшие prompts для мультимодальной модели на русском языке для извлечения информации из паспорта для каждого поля отдельно (Серия паспорта, Номер паспорта, Паспорт выдан, Дата выдачи, Номер подразделения, Фамилия, Имя, Отчество, Дата рождения, Пол, Место рождения).
```

### Answer

Для эффективной работы мультимодальной модели, промпты должны быть максимально конкретными и включать указание на визуальный контекст.  Ниже приведены промпты для извлечения каждого поля из изображения паспорта, с учетом возможных вариаций и неоднозначностей.  Обратите внимание на использование ключевых слов и указания на расположение информации на изображении.

**Для каждого поля ниже предлагаются несколько вариантов промптов:**

**1. Серия паспорта:**

* **Вариант 1 (прямой):**  "Найдите на изображении серию паспорта.  Серия обычно находится в левом верхнем углу.  Результат представьте в формате 'XX XX'."
* **Вариант 2 (более детальный):** "Извлеките серию паспорта с предоставленного изображения.  Поиск ведите в области, типичной для расположения серии (верхняя часть документа).  Ответ должен состоять из двух букв и двух цифр, разделенных пробелом."
* **Вариант 3 (с указанием на возможные отклонения):** "Определите серию паспорта на картинке.  Учитывайте, что расположение серии может незначительно варьироваться.  Выделите только серию, без лишних символов."


**2. Номер паспорта:**

* **Вариант 1 (прямой):** "Найдите номер паспорта на изображении. Номер обычно расположен рядом с серией."
* **Вариант 2 (с указанием формата):** "Извлеките номер паспорта из предоставленного изображения.  Номер состоит из шести или семи цифр.  Представьте результат в числовом формате."
* **Вариант 3 (с указанием на контекст):** "Найдите и извлеките номер паспорта, расположенный рядом с серией на изображении паспорта."


**3. Паспорт выдан:**

* **Вариант 1 (прямой):** "Определите, кем выдан паспорт, на основе предоставленного изображения."
* **Вариант 2 (более конкретный):** "Извлеките текст из поля 'Паспорт выдан' на изображении.  Результат должен содержать название органа, выдавшего паспорт."
* **Вариант 3 (с учетом сокращений):** "Найдите на изображении информацию о том, кем выдан паспорт.  Учитывайте возможные сокращения в названии органа."


**4. Дата выдачи:**

* **Вариант 1 (прямой):** "Найдите дату выдачи паспорта на изображении.  Представьте дату в формате ДД.ММ.ГГГГ."
* **Вариант 2 (с указанием формата):** "Извлеките дату выдачи паспорта с изображения.  Ожидаемый формат:  ДД.ММ.ГГГГ.  Не добавляйте лишней информации."
* **Вариант 3 (с учетом вариаций формата):** "Определите дату выдачи паспорта на картинке.  Учитывайте возможные вариации формата даты (например, DD.MM.YYYY)."


**5. Номер подразделения:**

* **Вариант 1 (прямой):** "Найдите номер подразделения, выдавшего паспорт, на изображении."
* **Вариант 2 (более конкретный):** "Извлеките номер подразделения с изображения.  Номер обычно указывается в поле 'Паспорт выдан'."
* **Вариант 3 (с указанием на возможные символы):** "Найдите номер подразделения на изображении.  Учитывайте, что номер может содержать буквы и цифры."


**6. Фамилия:**

* **Вариант 1 (прямой):** "Найдите фамилию владельца паспорта на изображении."
* **Вариант 2 (с указанием расположения):** "Извлеките фамилию с изображения паспорта.  Фамилия обычно расположена в верхней части документа."
* **Вариант 3 (с указанием на регистр):** "Определите фамилию владельца паспорта с изображения.  Результат должен быть представлен с заглавной буквы."


**7. Имя:**

* **Вариант 1 (аналогичен фамилии):** "Найдите имя владельца паспорта на изображении."
* **Вариант 2 (с указанием расположения):** "Извлеките имя с изображения паспорта. Имя обычно расположено рядом с фамилией."
* **Вариант 3 (с указанием на регистр):** "Определите имя владельца паспорта с изображения. Результат должен быть представлен с заглавной буквы."


**8. Отчество:**

* **Вариант 1 (аналогичен имени и фамилии):** "Найдите отчество владельца паспорта на изображении."
* **Вариант 2 (с указанием расположения):** "Извлеките отчество с изображения паспорта. Отчество обычно расположено после имени."
* **Вариант 3 (с указанием на регистр):** "Определите отчество владельца паспорта с изображения. Результат должен быть представлен с заглавной буквы."


**9. Дата рождения:**

* **Вариант 1 (прямой):** "Найдите дату рождения владельца паспорта на изображении.  Представьте дату в формате ДД.ММ.ГГГГ."
* **Вариант 2 (с указанием формата):** "Извлеките дату рождения с изображения паспорта.  Ожидаемый формат: ДД.ММ.ГГГГ."
* **Вариант 3 (с учетом вариаций формата):** "Определите дату рождения владельца паспорта на картинке.  Учитывайте возможные вариации формата даты."


**10. Пол:**

* **Вариант 1 (прямой):** "Определите пол владельца паспорта на изображении."
* **Вариант 2 (с вариантами ответа):** "Извлеките пол владельца паспорта с изображения.  Возможные варианты ответа: Мужской, Женский."
* **Вариант 3 (с указанием на место расположения):** "Найдите указание пола владельца паспорта на изображении.  Информация обычно находится рядом с датой рождения."


**11. Место рождения:**

* **Вариант 1 (прямой):** "Найдите место рождения владельца паспорта на изображении."
* **Вариант 2 (более детальный):** "Извлеките место рождения владельца паспорта с изображения. Результат должен содержать название региона/города."
* **Вариант 3 (с учетом возможных сокращений):** "Определите место рождения владельца паспорта на картинке.  Учитывайте возможные сокращения в названии места."


Эти промпты предлагают различные подходы к извлечению информации, что может повысить точность работы мультимодальной модели.  Важно экспериментировать с разными вариантами и выбирать наиболее эффективные для конкретной модели и набора данных.  Также рекомендуется использовать  обработку изображений (OCR) перед подачей данных в мультимодальную модель для улучшения результатов.



## Question 2


```
Задача: на вход мультимодальной модели подается изображение паспорта владельца на русском языке, нужно извлечь все ключевые поля и выдать ответ.  
Сгенерируй лучшие prompts для мультимодальной модели на русском языке для извлечения информации из паспорта для каждого поля отдельно (Серия паспорта, Номер паспорта, Паспорт выдан, Дата выдачи, Номер подразделения, Фамилия, Имя, Отчество, Дата рождения, Пол, Место рождения). Используй подходы для написания prompts, чтобы их улучшить:  
Zero-shot Prompting  
Few-shot Prompting  
Chain-of-Thought Prompting  
Self-Consistency  
Generate Knowledge Prompting  
Prompt Chaining  
Tree of Thoughts  
Retrieval Augmented Generation  
Automatic Reasoning and Tool-use  
Automatic Prompt Engineer  
Active-Prompt  
Directional Stimulus Prompting  
Program-Aided Language Models  
ReAct  
Reflexion  
Multimodal CoT  
Graph Prompting  
meta-prompting
```

### Answer 

Постараюсь! Вот примеры промптов для мультимодальной модели, нацеленных на извлечение информации из изображения паспорта, с использованием различных подходов для улучшения качества.

**Общий контекст для всех промптов:**

"На изображении представлен паспорт гражданина Российской Федерации. Извлеки из него следующую информацию:"

**1. Серия паспорта**

*   **Zero-shot:** "Укажи серию паспорта."
*   **Few-shot:** "Примеры серий паспортов: 45 04, 12 34, 99 88. Какая серия паспорта на этом изображении?"
*   **Chain-of-Thought:** "Серия паспорта - это первые четыре цифры, разделенные пробелом, в верхней части документа. Найди эти четыре цифры и укажи их."
*   **Directional Stimulus Prompting:** "Серия паспорта всегда состоит из 4 цифр, разделенных пробелом. Обрати внимание на верхнюю часть документа, где обычно располагается серия. Найди и извлеки серию паспорта из изображения."
*   **Generate Knowledge Prompting:** "Что ты знаешь о формате серии паспорта в России? Используй эти знания, чтобы найти серию на изображении."
*   **Prompt Chaining:** (1) "Найди в верхней части документа блок из четырех цифр, разделенных пробелом." (2) "Это и есть серия паспорта. Укажи ее."
*   **Program-Aided Language Models (PAL) (псевдокод):**
    ```
    image = load_image()
    text_regions = detect_text_regions(image)
    for region in text_regions:
      if is_four_digit_with_space(region.text):
        return region.text
    return "Серия не найдена"
    ```
*   **ReAct:** "Подумай: Серия паспорта - это число из четырех цифр. Где на изображении я могу найти подобное число? Действуй: Просмотри верхнюю часть изображения. Результат: Я нашел число, соответствующее формату. Ответ: \[найденная серия]"
*   **Reflexion:** (после первой попытки, если неверно) "Это неверный ответ. Серия паспорта всегда четыре цифры с пробелом. Попробуй еще раз, сфокусировавшись на верхней части документа."
*   **Graph Prompting:** (Создаем граф, где узлы - элементы паспорта, а ребра - их взаимосвязи). "В графе структуры паспорта, найди узел 'Серия паспорта', который связан с узлом 'Верхняя часть документа'. Извлеки значение этого узла."
*   **Meta-prompting**: "Я - система извлечения данных из документов. Моя задача - правильно определять и извлекать данные из паспортов. На изображении паспорт. Твоя задача - придумать наиболее эффективный промпт, который позволит мне максимально точно извлечь серию паспорта."

**2. Номер паспорта**

*   **Zero-shot:** "Какой номер паспорта на изображении?"
*   **Few-shot:** "Примеры номеров паспортов: 123456, 987654. Какой номер паспорта на этом изображении?"
*   **Chain-of-Thought:** "Номер паспорта состоит из шести цифр и находится сразу после серии. Найди серию, а затем шесть цифр, идущих за ней."
*   **Self-Consistency:** (генерируем несколько ответов, выбираем наиболее частый) (1) "Найди шестизначное число рядом с серией паспорта." (2) "Извлеки номер паспорта, который состоит из 6 цифр." (3) "Какой шестизначный номер указан после серии паспорта?"
*   **Automatic Reasoning and Tool-use (ART):** "Используй инструмент распознавания текста, чтобы найти шестизначное число, следующее за серией паспорта."
*   **Active-Prompt:** (после нескольких уточнений, если модель затрудняется) "Сосредоточься на области справа от серии паспорта. Там должно быть шестизначное число."
*   **Directional Stimulus Prompting:** "Номер паспорта - это 6 цифр, которые идут сразу после серии. Найди серию, а затем обрати внимание на следующие 6 цифр. Это и будет номер паспорта. Извлеки его из изображения."
*   **ReAct:** "Подумай: Номер паспорта - это шестизначный номер. Где на изображении я могу найти подобное число? Действуй: Просмотри область справа от серии. Результат: Я нашел число, соответствующее формату. Ответ: \[найденный номер]"
*   **Reflexion:** (после первой попытки, если неверно) "Это неверный ответ. Номер паспорта состоит из шести цифр. Попробуй еще раз, ища шестизначное число после серии."
*   **Multimodal CoT:** "На изображении видна серия паспорта \[серия], значит, номер паспорта - это шесть цифр, идущие сразу после. Извлеки эти шесть цифр."
*   **Meta-prompting**: "Я - система извлечения данных из документов. Моя задача - правильно определять и извлекать данные из паспортов. На изображении паспорт. Твоя задача - придумать наиболее эффективный промпт, который позволит мне максимально точно извлечь номер паспорта, который идет сразу после серии."

**3. Паспорт выдан**

*   **Zero-shot:** "Кем выдан паспорт?"
*   **Few-shot:** "Паспорт может быть выдан: УФМС России по г. Москве, МВД по Республике Татарстан. Какая организация указана в поле 'Паспорт выдан' на этом изображении?"
*   **Chain-of-Thought:** "Найди на изображении строку, начинающуюся со слов 'Паспорт выдан'. Прочитай текст, следующий за этими словами, до конца строки. Это и есть ответ."
*   **Generate Knowledge Prompting:** "Какие организации в России уполномочены выдавать паспорта? Используй эти знания, чтобы найти ответ на изображении."
*   **Automatic Prompt Engineer (APE):** (генерируем промпт на основе примеров и задачи) "На изображении паспорт. Извлеки из него информацию о том, кем он выдан. Ориентируйся на строку 'Паспорт выдан'."
*   **Tree of Thoughts (ToT):** (генерируем несколько путей решения, оцениваем, выбираем лучший) (1) "Найди строку 'Паспорт выдан' -> Прочитай следующий за ней текст." (2) "Найди блок текста, описывающий орган, выдавший документ -> Извлеки этот текст."
*   **Directional Stimulus Prompting:** "Обрати внимание на строку, начинающуюся с 'Паспорт выдан'. Там указано, кем был выдан паспорт. Извлеки полное наименование органа, выдавшего паспорт."
*   **ReAct:** "Подумай: Мне нужно найти, кем выдан паспорт. Где на изображении я могу найти эту информацию? Действуй: Найди строку 'Паспорт выдан' и прочитай следующий текст. Результат: Я нашел название организации. Ответ: \[найденная организация]"
*   **Reflexion:** (после первой попытки, если неполный ответ) "Это неполный ответ. Нужно указать полное наименование организации, как оно указано в паспорте. Попробуй еще раз, прочитав всю строку после 'Паспорт выдан'."
*   **Meta-prompting**: "Я - система извлечения данных из документов. Моя задача - правильно определять и извлекать данные из паспортов. На изображении паспорт. Твоя задача - придумать наиболее эффективный промпт, который позволит мне максимально точно извлечь информацию о том, кем выдан паспорт, из строки 'Паспорт выдан'."

**4. Дата выдачи**

*   **Zero-shot:** "Какая дата выдачи паспорта?"
*   **Few-shot:** "Примеры дат выдачи: 01.01.2023, 15.06.2010. Найди дату выдачи на изображении."
*   **Chain-of-Thought:** "Найди строку, где упоминается дата выдачи. Обычно она расположена рядом с полем 'Паспорт выдан'. Извлеки дату в формате ДД.ММ.ГГГГ."
*   **Retrieval Augmented Generation (RAG):** (дополняем промпт информацией из внешней базы знаний) "Согласно законодательству РФ, дата выдачи паспорта указывается в формате ДД.ММ.ГГГГ. Найди эту дату на изображении."
*   **Directional Stimulus Prompting:** "Дата выдачи паспорта указана в формате ДД.ММ.ГГГГ. Найди на изображении дату, соответствующую этому формату, рядом с полем 'Паспорт выдан'."
*   **ReAct:** "Подумай: Дата выдачи должна быть в формате ДД.ММ.ГГГГ. Где на изображении я могу найти дату? Действуй: Найди область рядом с полем 'Паспорт выдан'. Результат: Я нашел дату в нужном формате. Ответ: \[найденная дата]"
*   **Reflexion:** (после первой попытки, если неверный формат) "Это неверный формат даты. Дата выдачи должна быть в формате ДД.ММ.ГГГГ. Попробуй еще раз."
*   **Multimodal CoT:** "На изображении рядом с полем 'Паспорт выдан' должна быть указана дата выдачи в формате ДД.ММ.ГГГГ. Найди и извлеки эту дату."
*   **Meta-prompting**: "Я - система извлечения данных из документов. Моя задача - правильно определять и извлекать данные из паспортов. На изображении паспорт. Твоя задача - придумать наиболее эффективный промпт, который позволит мне максимально точно извлечь дату выдачи паспорта в формате ДД.ММ.ГГГГ."

**5. Код подразделения**

*   **Zero-shot:** "Какой код подразделения указан в паспорте?"
*   **Few-shot:** "Примеры кодов подразделений: 123-456, 789-012. Найди код подразделения на изображении."
*   **Chain-of-Thought:** "Код подразделения - это шесть цифр, разделенных дефисом. Найди на изображении последовательность цифр, соответствующую этому формату."
*   **Directional Stimulus Prompting:** "Код подразделения состоит из 6 цифр, разделенных дефисом (XXX-XXX). Найди на изображении соответствующий код рядом с датой выдачи паспорта и извлеки его."
*   **ReAct:** "Подумай: Код подразделения - это число вида XXX-XXX. Где на изображении я могу найти подобное число? Действуй: Найди область рядом с датой выдачи. Результат: Я нашел число, соответствующее формату. Ответ: \[найденный код]"
*   **Reflexion:** (после первой попытки, если неверный формат) "Это неверный формат. Код подразделения должен иметь вид XXX-XXX. Попробуй еще раз, обращая внимание на числа с дефисом."
*   **Meta-prompting**: "Я - система извлечения данных из документов. Моя задача - правильно определять и извлекать данные из паспортов. На изображении паспорт. Твоя задача - придумать наиболее эффективный промпт, который позволит мне максимально точно извлечь код подразделения в формате XXX-XXX, который обычно находится рядом с датой выдачи."

**6. Фамилия**

*   **Zero-shot:** "Какая фамилия владельца паспорта?"
*   **Few-shot:** "Примеры фамилий: Иванов, Петрова, Сидоров. Какая фамилия указана на изображении?"
*   **Chain-of-Thought:** "Найди строку, начинающуюся со слова 'Фамилия'. Слово, следующее за этим словом, и есть фамилия. Извлеки его."
*   **Directional Stimulus Prompting:** "Фамилия указана в самой верхней строке разворота паспорта с личными данными. Извлеки фамилию из этой строки."
*   **ReAct:** "Подумай: Где обычно указывается фамилия в паспорте? Действуй: Найди строку 'Фамилия' и прочитай следующее слово. Результат: Я нашел фамилию. Ответ: \[найденная фамилия]"
*   **Reflexion:** (после первой попытки, если неполный ответ) "Это, вероятно, не фамилия. Фамилия обычно стоит первой в блоке ФИО. Попробуй еще раз."
*   **Meta-prompting**: "Я - система извлечения данных из документов. Моя задача - правильно определять и извлекать данные из паспортов. На изображении паспорт. Твоя задача - придумать наиболее эффективный промпт, который позволит мне максимально точно извлечь фамилию владельца паспорта, которая обычно указывается первой в блоке ФИО."

**7. Имя**

*   **Zero-shot:** "Какое имя владельца паспорта?"
*   **Few-shot:** "Примеры имен: Иван, Мария, Петр. Какое имя указано на изображении?"
*   **Chain-of-Thought:** "Найди строку, начинающуюся со слова 'Имя'. Слово, следующее за этим словом, и есть имя. Извлеки его."
*   **Directional Stimulus Prompting:** "Имя указано во второй строке разворота паспорта с личными данными, сразу после фамилии. Извлеки имя из этой строки."
*   **ReAct:** "Подумай: Где обычно указывается имя в паспорте? Действуй: Найди строку 'Имя' и прочитай следующее слово. Результат: Я нашел имя. Ответ: \[найденное имя]"
*   **Reflexion:** (после первой попытки, если неполный ответ) "Это, вероятно, не имя. Имя обычно стоит вторым в блоке ФИО. Попробуй еще раз."
*   **Meta-prompting**: "Я - система извлечения данных из документов. Моя задача - правильно определять и извлекать данные из паспортов. На изображении паспорт. Твоя задача - придумать наиболее эффективный промпт, который позволит мне максимально точно извлечь имя владельца паспорта, которое обычно указывается вторым в блоке ФИО."

**8. Отчество**

*   **Zero-shot:** "Какое отчество владельца паспорта?"
*   **Few-shot:** "Примеры отчеств: Иванович, Петровна, Сидорович. Какое отчество указано на изображении?"
*   **Chain-of-Thought:** "Найди строку, где указано отчество. Обычно оно находится после имени. Извлеки отчество."
*   **Directional Stimulus Prompting:** "Отчество указано в третьей строке разворота паспорта с личными данными, сразу после имени. Извлеки отчество из этой строки."
*   **ReAct:** "Подумай: Где обычно указывается отчество в паспорте? Действуй: Найди строку с именем и прочитай следующее слово. Результат: Я нашел отчество. Ответ: \[найденное отчество]"
*   **Reflexion:** (после первой попытки, если неполный ответ) "Это, вероятно, не отчество. Отчество обычно стоит третьим в блоке ФИО. Попробуй еще раз."
*   **Meta-prompting**: "Я - система извлечения данных из документов. Моя задача - правильно определять и извлекать данные из паспортов. На изображении паспорт. Твоя задача - придумать наиболее эффективный промпт, который позволит мне максимально точно извлечь отчество владельца паспорта, которое обычно указывается третьим в блоке ФИО."

**9. Дата рождения**

*   **Zero-shot:** "Какая дата рождения владельца паспорта?"
*   **Few-shot:** "Примеры дат рождения: 01.01.1990, 15.06.1985. Найди дату рождения на изображении."
*   **Chain-of-Thought:** "Найди строку, где упоминается дата рождения. Обычно она расположена рядом с полем 'Дата рожд.'. Извлеки дату в формате ДД.ММ.ГГГГ."
*   **Directional Stimulus Prompting:** "Дата рождения указана в формате ДД.ММ.ГГГГ. Найди на изображении дату, соответствующую этому формату, рядом с полем 'Дата рожд.'."
*   **ReAct:** "Подумай: Дата рождения должна быть в формате ДД.ММ.ГГГГ. Где на изображении я могу найти дату? Действуй: Найди область рядом с полем 'Дата рожд.'. Результат: Я нашел дату в нужном формате. Ответ: \[найденная дата]"
*   **Reflexion:** (после первой попытки, если неверный формат) "Это неверный формат даты. Дата рождения должна быть в формате ДД.ММ.ГГГГ. Попробуй еще раз."
*   **Meta-prompting**: "Я - система извлечения данных из документов. Моя задача - правильно определять и извлекать данные из паспортов. На изображении паспорт. Твоя задача - придумать наиболее эффективный промпт, который позволит мне максимально точно извлечь дату рождения владельца паспорта в формате ДД.ММ.ГГГГ."

**10. Пол**

*   **Zero-shot:** "Какой пол владельца паспорта?"
*   **Few-shot:** "Пол может быть: мужской (муж.) или женский (жен.). Какой пол указан на изображении?"
*   **Chain-of-Thought:** "Найди строку, где упоминается пол. Обычно это сокращение 'муж.' или 'жен.'. Извлеки пол."
*   **Directional Stimulus Prompting:** "Пол указан сокращенно, как 'муж.' или 'жен.'. Найди на изображении одно из этих сокращений рядом с датой рождения."
*   **ReAct:** "Подумай: Пол обозначается сокращениями 'муж.' или 'жен.'. Где я могу найти эти сокращения? Действуй: Найди область рядом с датой рождения. Результат: Я нашел сокращение. Ответ: \[найденный пол]"
*   **Reflexion:** (после первой попытки, если неверный ответ) "Это неверный ответ. Пол должен быть указан как 'муж.' или 'жен.'. Попробуй еще раз."
*   **Meta-prompting**: "Я - система извлечения данных из документов. Моя задача - правильно определять и извлекать данные из паспортов. На изображении паспорт. Твоя задача - придумать наиболее эффективный промпт, который позволит мне максимально точно извлечь пол владельца паспорта, который обозначается сокращениями 'муж.' или 'жен.'."

**11. Место рождения**

*   **Zero-shot:** "Какое место рождения владельца паспорта?"
*   **Few-shot:** "Примеры мест рождения: г. Москва, с. Ивановка, Тамбовская обл. Какое место рождения указано на изображении?"
*   **Chain-of-Thought:** "Найди строку, начинающуюся со слов 'Место рождения'. Прочитай текст, следующий за этими словами, до конца строки. Это и есть ответ."
*   **Directional Stimulus Prompting:** "Место рождения указано в нижней части разворота паспорта с личными данными. Извлеки полное наименование места рождения из этой строки."
*   **ReAct:** "Подумай: Где обычно указывается место рождения в паспорте? Действуй: Найди строку 'Место рождения' и прочитай следующий текст. Результат: Я нашел место рождения. Ответ: \[найденное место рождения]"
*   **Reflexion:** (после первой попытки, если неполный ответ) "Это неполный ответ. Нужно указать полное наименование места рождения, как оно указано в паспорте. Попробуй еще раз, прочитав всю строку после 'Место рождения'."
*   **Meta-prompting**: "Я - система извлечения данных из документов. Моя задача - правильно определять и извлекать данные из паспортов. На изображении паспорт. Твоя задача - придумать наиболее эффективный промпт, который позволит мне максимально точно извлечь место рождения владельца паспорта, которое обычно указывается в отдельной строке в нижней части разворота с личными данными."

**Важно помнить:**

*   Качество извлечения информации сильно зависит от качества изображения паспорта.
*   Необходимо тестировать и адаптировать промпты под конкретную модель и особенности изображений.
*   Для каждой модели может потребоваться свой уникальный набор наиболее эффективных промптов.

Надеюсь, эти примеры помогут вам в решении вашей задачи!



## Question 3

```
Задача: на вход мультимодальной модели подается изображение паспорта владельца на русском языке, нужно извлечь все ключевые поля и выдать ответ.  
Сгенерируй лучшие prompts для мультимодальной модели на русском языке для извлечения информации из паспорта для каждого поля отдельно (Серия паспорта, Номер паспорта, Паспорт выдан, Дата выдачи, Номер подразделения, Фамилия, Имя, Отчество, Дата рождения, Пол, Место рождения). Ответ от модели должен быть в формате json - значение поля и значения bounding box, откуда модель взяла это значение, например {"feild_name": "feild_value"; "bbox": [x1,width,y2,height]}
```

### Answer

Конечно! Вот примеры промптов для мультимодальной модели, нацеленных на извлечение информации из изображения паспорта с ответом в формате JSON, включающем значение поля и его bounding box.

**Общий контекст для всех промптов:**

"Обработай изображение паспорта гражданина Российской Федерации. Извлеки из него указанные ниже поля и представь ответ в формате JSON. Для каждого поля укажи его значение и координаты bounding box в формате \[x\_min, y\_min, x\_max, y\_max], где (x\_min, y\_min) - координаты верхнего левого угла, а (x\_max, y\_max) - координаты нижнего правого угла области, из которой было извлечено значение. Пример формата ответа: `{"field_name": {"value": "field_value", "bbox": [x1, y1, x2, y2]}}`. Если какое-либо из полей не удаётся распознать, верни  `null` в качестве значения этого поля."

**1. Серия паспорта**

*   **Prompt:** "Найди серию паспорта. Серия паспорта - это первые четыре цифры, разделенные пробелом, в верхней части документа. Предоставь ответ в формате JSON: `{"Серия паспорта": {"value": "найденная серия", "bbox": [x1, y1, x2, y2]}}`."

**2. Номер паспорта**

*   **Prompt:** "Найди номер паспорта. Номер паспорта состоит из шести цифр и находится сразу после серии. Предоставь ответ в формате JSON: `{"Номер паспорта": {"value": "найденный номер", "bbox": [x1, y1, x2, y2]}}`."

**3. Паспорт выдан**

*   **Prompt:** "Определи, кем выдан паспорт. Найди строку, начинающуюся со слов 'Паспорт выдан'. Прочитай текст, следующий за этими словами. Предоставь ответ в формате JSON: `{"Паспорт выдан": {"value": "кем выдан паспорт", "bbox": [x1, y1, x2, y2]}}`."

**4. Дата выдачи**

*   **Prompt:** "Найди дату выдачи паспорта. Дата выдачи указана в формате ДД.ММ.ГГГГ рядом с полем 'Паспорт выдан'. Предоставь ответ в формате JSON: `{"Дата выдачи": {"value": "найденная дата", "bbox": [x1, y1, x2, y2]}}`."

**5. Код подразделения**

*   **Prompt:** "Найди код подразделения. Код подразделения - это шесть цифр, разделенных дефисом (XXX-XXX), расположенные рядом с датой выдачи. Предоставь ответ в формате JSON: `{"Код подразделения": {"value": "найденный код", "bbox": [x1, y1, x2, y2]}}`."

**6. Фамилия**

*   **Prompt:** "Определи фамилию владельца паспорта. Найди строку, начинающуюся со слова 'Фамилия'. Предоставь ответ в формате JSON: `{"Фамилия": {"value": "найденная фамилия", "bbox": [x1, y1, x2, y2]}}`."

**7. Имя**

*   **Prompt:** "Определи имя владельца паспорта. Найди строку, начинающуюся со слова 'Имя'. Предоставь ответ в формате JSON: `{"Имя": {"value": "найденное имя", "bbox": [x1, y1, x2, y2]}}`."

**8. Отчество**

*   **Prompt:** "Определи отчество владельца паспорта. Отчество обычно находится после имени. Предоставь ответ в формате JSON: `{"Отчество": {"value": "найденное отчество", "bbox": [x1, y1, x2, y2]}}`."

**9. Дата рождения**

*   **Prompt:** "Найди дату рождения владельца паспорта. Дата рождения указана в формате ДД.ММ.ГГГГ рядом с полем 'Дата рожд.'. Предоставь ответ в формате JSON: `{"Дата рождения": {"value": "найденная дата", "bbox": [x1, y1, x2, y2]}}`."

**10. Пол**

*   **Prompt:** "Определи пол владельца паспорта. Пол указан сокращенно, как 'муж.' или 'жен.' рядом с датой рождения. Предоставь ответ в формате JSON: `{"Пол": {"value": "найденный пол", "bbox": [x1, y1, x2, y2]}}`."

**11. Место рождения**

*   **Prompt:** "Найди место рождения владельца паспорта. Найди строку, начинающуюся со слов 'Место рождения'. Предоставь ответ в формате JSON: `{"Место рождения": {"value": "найденное место рождения", "bbox": [x1, y1, x2, y2]}}`."

**Пример полного ответа модели (для всех полей):**

```json
{
  "Серия паспорта": {"value": "45 04", "bbox": [10, 10, 50, 20]},
  "Номер паспорта": {"value": "123456", "bbox": [60, 10, 120, 20]},
  "Паспорт выдан": {"value": "УФМС России по гор. Москве", "bbox": [10, 30, 200, 50]},
  "Дата выдачи": {"value": "01.01.2023", "bbox": [210, 30, 280, 40]},
  "Код подразделения": {"value": "770-001", "bbox": [290, 30, 350, 40]},
  "Фамилия": {"value": "Иванов", "bbox": [10, 60, 100, 70]},
  "Имя": {"value": "Иван", "bbox": [110, 60, 180, 70]},
  "Отчество": {"value": "Иванович", "bbox": [190, 60, 280, 70]},
  "Дата рождения": {"value": "01.01.1990", "bbox": [10, 80, 100, 90]},
  "Пол": {"value": "муж.", "bbox": [110, 80, 150, 90]},
  "Место рождения": {"value": "гор. Москва", "bbox": [10, 100, 200, 120]}
}
```

**Дополнительные рекомендации:**

*   **Уточнение формата координат:** Вместо  `[x1,width,y2,height]`  лучше использовать  `[x_min, y_min, x_max, y_max]`, что является более стандартным представлением bounding box.
*   **Обработка ошибок:** Можно добавить инструкцию на случай, если поле не найдено. Например, возвращать  `null`  в качестве значения и `bbox`.
*   **Единый промпт:**  Также возможно создать единый промпт, запрашивающий все поля сразу, но это может быть менее надежно.

**Пример единого промпта:**

"Извлеки из изображения паспорта следующие поля: Серия паспорта, Номер паспорта, Паспорт выдан, Дата выдачи, Код подразделения, Фамилия, Имя, Отчество, Дата рождения, Пол, Место рождения. Предоставь ответ в формате JSON, где для каждого поля указано его значение и координаты bounding box в формате \[x\_min, y\_min, x\_max, y\_max]. Пример: `{"field_name": {"value": "field_value", "bbox": [x1, y1, x2, y2]}}`. Если какое-либо из полей не удаётся распознать, верни  `null` в качестве значения этого поля."

**Важно:**

*   Тестируйте и адаптируйте промпты под конкретную модель.
*   Качество извлечения информации напрямую зависит от качества изображения.
*   Для каждой модели может потребоваться свой уникальный набор наиболее эффективных промптов, нужно проводить эксперименты.
*   Обратите внимание, что модель может галлюцинировать и выдавать координаты несуществующих полей. Нужно предусмотреть валидацию и фильтрацию результатов.

Удачи в решении вашей задачи!


## Question 4

```
Задача: на вход мультимодальной модели Qwen-VL подается изображение паспорта владельца на русском языке, нужно извлечь все ключевые поля и выдать ответ.  
Сгенерируй лучшие prompts для мультимодальной модели на русском языке для извлечения информации из паспорта для каждого поля отдельно (Серия паспорта, Номер паспорта, Паспорт выдан, Дата выдачи, Номер подразделения, Фамилия, Имя, Отчество, Дата рождения, Пол, Место рождения).
```

### Answer

**Qwen-VL** — это мультимодальная модель, поэтому важно формулировать промпты, учитывая ее возможности работы с изображениями и текстом. Вот примеры промптов, адаптированных для Qwen-VL:

**Общий контекст для всех промптов:**

"Ниже представлено изображение паспорта гражданина Российской Федерации. Внимательно изучи изображение и извлеки из него указанную информацию."

**1. Серия паспорта**

*   **Prompt:** "На изображении найди серию паспорта. Серия паспорта - это четыре цифры, разделенные пробелом, расположенные в верхней части документа. Какой серии соответствует этот паспорт?"
*   **Подсказка для Qwen-VL:**  Можно добавить: "Сфокусируйся на верхней части изображения, где обычно располагается серия паспорта."

**2. Номер паспорта**

*   **Prompt:** "Какой номер паспорта указан на изображении? Номер паспорта - это шесть цифр, идущих сразу после серии паспорта."
*   **Подсказка для Qwen-VL:** Можно добавить: "Обрати внимание на область справа от серии паспорта."

**3. Паспорт выдан**

*   **Prompt:** "Найди на изображении, кем выдан паспорт. Обрати внимание на строку, начинающуюся со слов 'Паспорт выдан'."
*   **Подсказка для Qwen-VL:** Можно добавить: "Ищи текст, начинающийся со слов 'Паспорт выдан'."

**4. Дата выдачи**

*   **Prompt:** "Определи дату выдачи паспорта по изображению. Дата выдачи указана в формате ДД.ММ.ГГГГ."
*   **Подсказка для Qwen-VL:**  Можно добавить: "Ищи дату в формате ДД.ММ.ГГГГ рядом с информацией о том, кем выдан паспорт."

**5. Код подразделения**

*   **Prompt:** "Какой код подразделения указан на изображении паспорта? Код подразделения состоит из шести цифр, разделенных дефисом, в формате XXX-XXX."
*   **Подсказка для Qwen-VL:** Можно добавить: "Ищи код в формате XXX-XXX рядом с датой выдачи."

**6. Фамилия**

*   **Prompt:** "Определи фамилию владельца паспорта, изображенного на картинке. Найди строку, начинающуюся со слова 'Фамилия'."
*   **Подсказка для Qwen-VL:** Можно добавить: "Слово, следующее за словом 'Фамилия', и будет искомой фамилией."

**7. Имя**

*   **Prompt:** "Какое имя владельца паспорта указано на изображении? Найди строку, начинающуюся со слова 'Имя'."
*   **Подсказка для Qwen-VL:** Можно добавить: "Слово, следующее за словом 'Имя', и будет искомым именем."

**8. Отчество**

*   **Prompt:** "Определи отчество владельца паспорта по изображению. Отчество следует сразу за именем."
*   **Подсказка для Qwen-VL:**  Можно добавить: "Найди блок ФИО и извлеки отчество, которое расположено после имени."

**9. Дата рождения**

*   **Prompt:** "Какая дата рождения указана в паспорте на изображении? Дата рождения указана в формате ДД.ММ.ГГГГ."
*   **Подсказка для Qwen-VL:** Можно добавить: "Ищи дату в формате ДД.ММ.ГГГГ."

**10. Пол**

*   **Prompt:** "Какой пол владельца паспорта указан на изображении? Пол указан сокращенно: 'муж.' или 'жен.'."
*   **Подсказка для Qwen-VL:**  Можно добавить: "Ищи сокращения 'муж.' или 'жен.' рядом с датой рождения."

**11. Место рождения**

*   **Prompt:** "Найди место рождения владельца паспорта на изображении. Обрати внимание на строку, начинающуюся со слов 'Место рождения'."
*   **Подсказка для Qwen-VL:** Можно добавить: "Ищи текст, начинающийся со слов 'Место рождения'."
**Дополнения к промптам:**

Можно добавить в конце каждого промпта просьбу предоставить ответ в определенном формате, например:

*   "Ответ предоставь в виде: \[значение]"
*   "Извлеки значение и напиши его."

**Важные моменты для Qwen-VL:**

*   **Четкие инструкции:** Qwen-VL лучше реагирует на четкие и конкретные инструкции.
*   **Визуальные подсказки:** Используйте слова, указывающие на расположение элементов на изображении ("в верхней части", "рядом с", "начинающуюся со слов").
*   **Формат ответа:** Явно указывайте желаемый формат ответа.
*   **Тестирование:** Обязательно протестируйте различные варианты промптов, чтобы найти наиболее эффективные для Qwen-VL.

**Дополнительные техники, которые можно использовать с Qwen-VL:**

*   **Few-shot prompting:** Можно привести примеры извлечения данных из паспорта для нескольких полей, а затем попросить извлечь данные из нового изображения.
*   **Chain-of-thought prompting:** Можно разбить задачу на несколько шагов, например: "Сначала найди строку 'Фамилия', затем извлеки следующее за ней слово."

**Пример Few-shot prompting для Серии паспорта:**

"Вот несколько примеров извлечения серии паспорта из изображений:

*   Изображение 1: \[ссылка на изображение 1] - Серия паспорта: 45 05
*   Изображение 2: \[ссылка на изображение 2] - Серия паспорта: 32 12

Теперь найди серию паспорта на этом изображении: \[ссылка на изображение 3]. Серия паспорта - это четыре цифры, разделенные пробелом, расположенные в верхней части документа."

**Пример Chain-of-thought prompting для Фамилии:**

"1. Найди на изображении строку, начинающуюся со слова 'Фамилия'.
2. Извлеки слово, следующее сразу за словом 'Фамилия'.
3. Какое слово ты извлек?"

**Помните:**

*   Качество извлечения информации сильно зависит от качества изображения паспорта.
*   Необходимо тестировать и адаптировать промпты под конкретную модель Qwen-VL и особенности изображений.
*   Нужно проводить эксперименты, чтобы найти наиболее эффективные промпты.

Надеюсь, эти примеры помогут вам получить нужные данные из изображений паспортов с помощью Qwen-VL!
